flights = sum(flights)) %>%
mutate(date = mdy(date)) %>%
mutate(wday = wday(date, label=TRUE)) %>%
mutate(month = month(date, label=TRUE)) %>%
select(airport,date,month,wday,everything()) %>%
arrange(date)
ord
ord = read_csv2("../../data/chicago-2018.csv") %>%
select(-ends_with("wait")) %>%
select(-contains("_n_")) %>%
rename(passengers = all_total,
flights = all_flights) %>%
group_by(airport,date) %>%
summarize(passengers = sum(passengers),
flights = sum(flights)) %>%
mutate(date = mdy(date)) %>%
mutate(wday = wday(date, label=TRUE)) %>%
mutate(month = month(date, label=TRUE)) %>%
select(airport,date,month,wday,everything()) %>%
arrange(date)
ord1 <- ord %>%
group_by(wday)
ord1
ord = read_csv2("../../data/chicago-2018.csv") %>%
select(-ends_with("wait")) %>%
select(-contains("_n_")) %>%
rename(passengers = all_total,
flights = all_flights) %>%
group_by(airport,date) %>%
summarize(passengers = sum(passengers),
flights = sum(flights)) %>%
mutate(date = mdy(date)) %>%
mutate(wday = wday(date, label=TRUE)) %>%
mutate(month = month(date, label=TRUE)) %>%
select(airport,date,month,wday,everything()) %>%
arrange(date)
ord1 <- ord %>%
group_by(wday)
ggplot(ord1, aes(x=wday, y=mean(passengers))) +
geom_bar()
ord = read_csv2("../../data/chicago-2018.csv") %>%
select(-ends_with("wait")) %>%
select(-contains("_n_")) %>%
rename(passengers = all_total,
flights = all_flights) %>%
group_by(airport,date) %>%
summarize(passengers = sum(passengers),
flights = sum(flights)) %>%
mutate(date = mdy(date)) %>%
mutate(wday = wday(date, label=TRUE)) %>%
mutate(month = month(date, label=TRUE)) %>%
select(airport,date,month,wday,everything()) %>%
arrange(date)
ord1 <- ord %>%
group_by(wday)
ggplot(ord1, aes(x=wday) +
geom_bar()
ord = read_csv2("../../data/chicago-2018.csv") %>%
select(-ends_with("wait")) %>%
select(-contains("_n_")) %>%
rename(passengers = all_total,
flights = all_flights) %>%
group_by(airport,date) %>%
summarize(passengers = sum(passengers),
flights = sum(flights)) %>%
mutate(date = mdy(date)) %>%
mutate(wday = wday(date, label=TRUE)) %>%
mutate(month = month(date, label=TRUE)) %>%
select(airport,date,month,wday,everything()) %>%
arrange(date)
ord1 <- ord %>%
group_by(wday)
ggplot(ord1, aes(y=mean(passengers)) +
geom_bar()
ord = read_csv2("../../data/chicago-2018.csv") %>%
select(-ends_with("wait")) %>%
select(-contains("_n_")) %>%
rename(passengers = all_total,
flights = all_flights) %>%
group_by(airport,date) %>%
summarize(passengers = sum(passengers),
flights = sum(flights)) %>%
mutate(date = mdy(date)) %>%
mutate(wday = wday(date, label=TRUE)) %>%
mutate(month = month(date, label=TRUE)) %>%
select(airport,date,month,wday,everything()) %>%
arrange(date)
ord1 <- ord %>%
group_by(wday)
ggplot(ord1, aes(y=mean(passengers)) +
geom_bar()
ord1
ord = read_csv2("../../data/chicago-2018.csv") %>%
select(-ends_with("wait")) %>%
select(-contains("_n_")) %>%
rename(passengers = all_total,
flights = all_flights) %>%
group_by(airport,date) %>%
summarize(passengers = sum(passengers),
flights = sum(flights)) %>%
mutate(date = mdy(date)) %>%
mutate(wday = wday(date, label=TRUE)) %>%
mutate(month = month(date, label=TRUE)) %>%
select(airport,date,month,wday,everything()) %>%
arrange(date)
ord1 <- ord %>%
group_by(wday) %>%
summarize(passengers=mean(pasengers))
ord = read_csv2("../../data/chicago-2018.csv") %>%
select(-ends_with("wait")) %>%
select(-contains("_n_")) %>%
rename(passengers = all_total,
flights = all_flights) %>%
group_by(airport,date) %>%
summarize(passengers = sum(passengers),
flights = sum(flights)) %>%
mutate(date = mdy(date)) %>%
mutate(wday = wday(date, label=TRUE)) %>%
mutate(month = month(date, label=TRUE)) %>%
select(airport,date,month,wday,everything()) %>%
arrange(date)
ord1 <- ord %>%
group_by(wday) %>%
summarize(passengers=mean(passengers))
ord1
ord = read_csv2("../../data/chicago-2018.csv") %>%
select(-ends_with("wait")) %>%
select(-contains("_n_")) %>%
rename(passengers = all_total,
flights = all_flights) %>%
group_by(airport,date) %>%
summarize(passengers = sum(passengers),
flights = sum(flights)) %>%
mutate(date = mdy(date)) %>%
mutate(wday = wday(date, label=TRUE)) %>%
mutate(month = month(date, label=TRUE)) %>%
select(airport,date,month,wday,everything()) %>%
arrange(date)
ord1 <- ord %>%
group_by(wday) %>%
summarize(passengers=mean(passengers))
ggplot(ord1, aes(x=wday)) +
geom_col()
ord = read_csv2("../../data/chicago-2018.csv") %>%
select(-ends_with("wait")) %>%
select(-contains("_n_")) %>%
rename(passengers = all_total,
flights = all_flights) %>%
group_by(airport,date) %>%
summarize(passengers = sum(passengers),
flights = sum(flights)) %>%
mutate(date = mdy(date)) %>%
mutate(wday = wday(date, label=TRUE)) %>%
mutate(month = month(date, label=TRUE)) %>%
select(airport,date,month,wday,everything()) %>%
arrange(date)
ord1 <- ord %>%
group_by(wday) %>%
summarize(passengers=mean(passengers))
ggplot(ord1, aes(x=wday, y=passengers)) +
geom_col()
ord = read_csv2("../../data/chicago-2018.csv") %>%
select(-ends_with("wait")) %>%
select(-contains("_n_")) %>%
rename(passengers = all_total,
flights = all_flights) %>%
group_by(airport,date) %>%
summarize(passengers = sum(passengers),
flights = sum(flights)) %>%
mutate(date = mdy(date)) %>%
mutate(wday = wday(date, label=TRUE)) %>%
mutate(month = month(date, label=TRUE)) %>%
select(airport,date,month,wday,everything()) %>%
arrange(date)
ord1 <- ord %>%
group_by(wday) %>%
summarize(passengers=mean(passengers))
ggplot(ord1, aes(x=wday, y=passengers)) +
geom_col() +
xlab("Day") +
ylab("Passengers") +
ggtitle("Number of Passengers Per Day Arriving Chicago ORD")
ord = read_csv2("../../data/chicago-2018.csv") %>%
select(-ends_with("wait")) %>%
select(-contains("_n_")) %>%
rename(passengers = all_total,
flights = all_flights) %>%
group_by(airport,date) %>%
summarize(passengers = sum(passengers),
flights = sum(flights)) %>%
mutate(date = mdy(date)) %>%
mutate(wday = wday(date, label=TRUE)) %>%
mutate(month = month(date, label=TRUE)) %>%
select(airport,date,month,wday,everything()) %>%
arrange(date)
ord1 <- ord %>%
group_by(wday) %>%
summarize(passengers=mean(passengers))
ggplot(ord1, aes(x=wday, y=passengers)) +
geom_col(fill="blue") +
xlab("Day") +
ylab("Passengers") +
ggtitle("Number of Passengers Per Day Arriving Chicago ORD")
den = read_csv("../../data/denver-2018.csv") %>%
## removes cols whose names end with 'wait'
select(-ends_with("wait")) %>%
## removes cols whose names contain '_n_'
select(-contains("_n_")) %>%
## removes cols terminal, hour, all_excluded, all_booths
select(-terminal,-hour,-all_excluded,-all_booths) %>%
## renames col all_total to passengers and col all_flights to flights
rename(passengers = all_total,
flights = all_flights) %>%
group_by(airport,date) %>%
## modify passenger and flight cols so they show the sums of the respective categories
summarize(passengers = sum(passengers),
flights = sum(flights)) %>%
## modifies date to be in month-day-year form
mutate(date = mdy(date)) %>%
## add new wday col to display weekday in string form
mutate(wday = wday(date, label=TRUE)) %>%
## add new month col to display month in string form
mutate(month = month(date, label=TRUE)) %>%
## reorders the cols as below
select(airport,date,month,wday,everything()) %>%
## orders cols in asc date order
arrange(date)
den
den = read_csv("../../data/denver-2018.csv") %>%
## removes cols whose names end with 'wait'
select(-ends_with("wait")) %>%
## removes cols whose names contain '_n_'
select(-contains("_n_")) %>%
## removes cols terminal, hour, all_excluded, all_booths
select(-terminal,-hour,-all_excluded,-all_booths) %>%
## renames col all_total to passengers and col all_flights to flights
rename(passengers = all_total,
flights = all_flights) %>%
group_by(airport,date) %>%
## modify passenger and flight cols so they show the sums of the respective categories
summarize(passengers = sum(passengers),
flights = sum(flights)) %>%
## modifies date to be in month-day-year form
mutate(date = mdy(date)) %>%
## add new wday col to display weekday in string form
mutate(wday = wday(date, label=TRUE)) %>%
## add new month col to display month in string form
mutate(month = month(date, label=TRUE)) %>%
## reorders the cols as below
select(airport,date,month,wday,everything()) %>%
## orders cols in asc date order
arrange(date)
den %>%
group_by(month) %>%
select(month, flights)
den = read_csv("../../data/denver-2018.csv") %>%
## removes cols whose names end with 'wait'
select(-ends_with("wait")) %>%
## removes cols whose names contain '_n_'
select(-contains("_n_")) %>%
## removes cols terminal, hour, all_excluded, all_booths
select(-terminal,-hour,-all_excluded,-all_booths) %>%
## renames col all_total to passengers and col all_flights to flights
rename(passengers = all_total,
flights = all_flights) %>%
group_by(airport,date) %>%
## modify passenger and flight cols so they show the sums of the respective categories
summarize(passengers = sum(passengers),
flights = sum(flights)) %>%
## modifies date to be in month-day-year form
mutate(date = mdy(date)) %>%
## add new wday col to display weekday in string form
mutate(wday = wday(date, label=TRUE)) %>%
## add new month col to display month in string form
mutate(month = month(date, label=TRUE)) %>%
## reorders the cols as below
select(airport,date,month,wday,everything()) %>%
## orders cols in asc date order
arrange(date)
den %>%
select(month, flights) %>%
group_by(month)
den = read_csv("../../data/denver-2018.csv") %>%
## removes cols whose names end with 'wait'
select(-ends_with("wait")) %>%
## removes cols whose names contain '_n_'
select(-contains("_n_")) %>%
## removes cols terminal, hour, all_excluded, all_booths
select(-terminal,-hour,-all_excluded,-all_booths) %>%
## renames col all_total to passengers and col all_flights to flights
rename(passengers = all_total,
flights = all_flights) %>%
group_by(airport,date) %>%
## modify passenger and flight cols so they show the sums of the respective categories
summarize(passengers = sum(passengers),
flights = sum(flights)) %>%
## modifies date to be in month-day-year form
mutate(date = mdy(date)) %>%
## add new wday col to display weekday in string form
mutate(wday = wday(date, label=TRUE)) %>%
## add new month col to display month in string form
mutate(month = month(date, label=TRUE)) %>%
## reorders the cols as below
select(airport,date,month,wday,everything()) %>%
## orders cols in asc date order
arrange(date)
den %>%
select(month, flights) %>%
group_by(month) %>%
summarize(flights = sum(flights))
den = read_csv("../../data/denver-2018.csv") %>%
## removes cols whose names end with 'wait'
select(-ends_with("wait")) %>%
## removes cols whose names contain '_n_'
select(-contains("_n_")) %>%
## removes cols terminal, hour, all_excluded, all_booths
select(-terminal,-hour,-all_excluded,-all_booths) %>%
## renames col all_total to passengers and col all_flights to flights
rename(passengers = all_total,
flights = all_flights) %>%
group_by(airport,date) %>%
## modify passenger and flight cols so they show the sums of the respective categories
summarize(passengers = sum(passengers),
flights = sum(flights)) %>%
## modifies date to be in month-day-year form
mutate(date = mdy(date)) %>%
## add new wday col to display weekday in string form
mutate(wday = wday(date, label=TRUE)) %>%
## add new month col to display month in string form
mutate(month = month(date, label=TRUE)) %>%
## reorders the cols as below
select(airport,date,month,wday,everything()) %>%
## orders cols in asc date order
arrange(date)
den_data <- den %>%
select(month, flights) %>%
group_by(month) %>%
summarize(flights = sum(flights))
ggplot(den_data,aes(x=month, y=flights)) +
geom_line(aes(group = 1))
now_dt = now()
year(now_dt)
month(now_dt)
wday(now_dt)
wday(now_dt, label=TRUE)
hour(now_dt)
knitr::opts_chunk$set(echo = TRUE, message=FALSE, fig.height = 3)
library(tidyverse)
library(lubridate)
## Note: this code assumes viridis.R is two steps up the file directory tree
## Comment it out and use the line below if the file is in the same directory
## Or comment out both lines if you do not have the file
source("../../scripts/viridis.R")
## Read in the csv file
## Select some variables that we will work with and rename them
## Remove very massive planet (only to improve plot visuals)
## Drop missing values; the remaining exoplanets will have estimates of both mass and radius
planets <- read_csv("../../data/exoplanets-3sept2020.csv") %>%
filter(default_flag == 1) %>%
select(pl_name, hostname, discoverymethod, disc_year, sy_pnum, pl_rade, pl_bmasse) %>%
rename(planet=pl_name, star=hostname, method=discoverymethod,year=disc_year, number=sy_pnum, radius=pl_rade, mass=pl_bmasse)
planets %>%
filter(method == 'Transit' | method == 'Radial Velocity')
planets %>%
filter(method == 'Transit' | method == 'Radial Velocity') %>%
group_by(method) %>%
summarize(min=min(mass), p_25=quantile(.25,mass), mean=mean(mass), median=median(mass), max=max(mass))
planets %>%
filter(method == 'Transit' | method == 'Radial Velocity') %>%
group_by(method) %>%
summarize(min=min(mass), p_25= quantile(.25,mass), mean=mean(mass), median=median(mass), max=max(mass))
planets %>%
filter(method == 'Transit' | method == 'Radial Velocity') %>%
group_by(method) %>%
summarize(min=min(mass), percentile = quantile(.25, mass), mean=mean(mass), median=median(mass), max=max(mass))
planets %>%
filter(method == 'Transit' | method == 'Radial Velocity') %>%
group_by(method) %>%
summarize( min=min(mass), percentile = quantile(mass, .25), mean=mean(mass), median=median(mass), max=max(mass) )
planets %>%
filter(method == 'Transit' | method == 'Radial Velocity') %>%
group_by(method) %>%
summarize( min=min(mass), percentile = quantile(.25, mass), mean=mean(mass), median=median(mass), max=max(mass) )
planets %>%
filter(method == 'Transit' | method == 'Radial Velocity') %>%
group_by(method)
planets %>%
filter(method == 'Transit' | method == 'Radial Velocity') %>%
drop_na() %>%
group_by(method) %>%
summarize( min=min(mass), percentile = quantile(.25, mass), mean=mean(mass), median=median(mass), max=max(mass) )
planets %>%
filter(method == 'Transit' | method == 'Radial Velocity') %>%
drop_na() %>%
group_by(method) %>%
summarize( min=min(mass), percentile = quantile(mass, .25), mean=mean(mass), median=median(mass), max=max(mass) )
planets %>%
filter(mass >= 1)
planets %>%
filter(mass <= 1)
planets %>%
filter(mass <= 1) %>%
summarize(n=n(), min=min(mass), max=max(mass))
planets %>%
filter(mass <= 1) %>%
summarize(n=n(), min=min(mass), max=max(mass))
planets %>%
filter(mass >= 1) %>%
summarize(n=n(), min=min(mass), max=max(mass))
planets %>%
filter(mass <= 1) %>%
drop_na() %>%
summarize(n=n(), min=min(mass), max=max(mass))
planets %>%
filter(mass >= 1) %>%
drop_na() %>%
summarize(n=n(), min=min(mass), max=max(mass))
planets %>%
filter(mass <= 1) %>%
drop_na() %>%
summarize(n=n(), min=min(mass), max=max(mass))
planets %>%
filter(radius <= 1) %>%
drop_na() %>%
summarize(n=n(), min=min(radius), max=max(radius))
planets %>%
filter(mass < 1 & radius < 1)
planets %>%
filter(mass < 1 & radius < 1) %>%
select(planet, star, method, mass, radius)
planets %>%
filter(mass <= 1 & radius <= 1)
planets %>%
filter(mass <= 1 & radius <= 1) %>%
pull(star)
planets %>%
slice_max(mass, n=3)
planets %>%
slice_max(mass, n=3) %>%
mutate(mass_j = mass/317.8)
planets %>%
filter(method != `Astrometry`) %>%
filter(method != `Disk Kinematics`) %>%
filter(method != `Eclipse Timing Variations`) %>%
filter(method != `Orbital Brightness Modulation`) %>%
filter(method != `Pulsar Timing`) %>%
filter(method != `Pulsar Timing Variations`)
planets %>%
filter(method != "Astrometry") %>%
filter(method != "Disk Kinematics") %>%
filter(method != "Eclipse Timing Variations") %>%
filter(method != "Orbital Brightness Modulation") %>%
filter(method != "Pulsar Timing") %>%
filter(method != "Pulsar Timing Variations")
planets %>%
filter(method != "Astrometry") %>%
filter(method != "Disk Kinematics") %>%
filter(method != "Eclipse Timing Variations") %>%
filter(method != "Orbital Brightness Modulation") %>%
filter(method != "Pulsar Timing") %>%
filter(method != "Pulsar Timing Variations") %>%
filter(!is.na(mass))
data<- planets %>%
filter(method != "Astrometry") %>%
filter(method != "Disk Kinematics") %>%
filter(method != "Eclipse Timing Variations") %>%
filter(method != "Orbital Brightness Modulation") %>%
filter(method != "Pulsar Timing") %>%
filter(method != "Pulsar Timing Variations") %>%
filter(!is.na(mass))
ggplot(data, aes(x=method, y=mass/317.8)) +
geom_boxplot(coef=Inf) +
scale_y_continuous(trans=log10) +
theme(axis.text.x = element_text(angle = 45, hjust=1))
data<- planets %>%
filter(method != "Astrometry") %>%
filter(method != "Disk Kinematics") %>%
filter(method != "Eclipse Timing Variations") %>%
filter(method != "Orbital Brightness Modulation") %>%
filter(method != "Pulsar Timing") %>%
filter(method != "Pulsar Timing Variations") %>%
filter(!is.na(mass))
ggplot(data, aes(x=method, y=mass/317.8, color=method)) +
geom_boxplot(coef=Inf) +
scale_y_continuous(trans=log10) +
theme(axis.text.x = element_text(angle = 45, hjust=1))
data<- planets %>%
filter(method != "Astrometry") %>%
filter(method != "Disk Kinematics") %>%
filter(method != "Eclipse Timing Variations") %>%
filter(method != "Orbital Brightness Modulation") %>%
filter(method != "Pulsar Timing") %>%
filter(method != "Pulsar Timing Variations") %>%
filter(!is.na(mass))
ggplot(data, aes(x=method, y=mass/317.8, color=method)) +
geom_boxplot(coef=Inf) +
scale_y_continuous(trans="log10") +
theme(axis.text.x = element_text(angle = 45, hjust=1))
planets %>%
filter(method == 'Transit')
planets %>%
filter(method != 'Transit')
planets %>%
filter(method != 'Transit') %>%
select(planet, method, year, radius, mass) %>%
drop_na()
data2<- planets %>%
filter(method != 'Transit') %>%
select(planet, method, year, radius, mass) %>%
drop_na()
ggplot(data2, aes(x=year, y=radius, color=method, size=mass)) +
geom_point()
